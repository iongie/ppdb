<div class="w-full py-16 md:pt-18 mx-auto mt-20 md:mt-32">
    <!-- <ppdb-form-hasil-seleksi-utama></ppdb-form-hasil-seleksi-utama> -->
    <!-- <ppdb-form-hasil-seleksi-v2-utama></ppdb-form-hasil-seleksi-v2-utama> -->
    <ppdb-form-hasil-seleksi-v3-utama></ppdb-form-hasil-seleksi-v3-utama>
    <!-- <ng-container *ngIf="hasilSeleksi.peserta.length === 0">
        <section class="bg-white dark:bg-gray-900">
            <div class="flex flex-col justify-center items-center">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                    class="w-52 h-52 text-center text-gray-300">
                    <path fill-rule="evenodd"
                        d="M1.5 5.625c0-1.036.84-1.875 1.875-1.875h17.25c1.035 0 1.875.84 1.875 1.875v12.75c0 1.035-.84 1.875-1.875 1.875H3.375A1.875 1.875 0 0 1 1.5 18.375V5.625ZM21 9.375A.375.375 0 0 0 20.625 9h-7.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375h7.5a.375.375 0 0 0 .375-.375v-1.5Zm0 3.75a.375.375 0 0 0-.375-.375h-7.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375h7.5a.375.375 0 0 0 .375-.375v-1.5Zm0 3.75a.375.375 0 0 0-.375-.375h-7.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375h7.5a.375.375 0 0 0 .375-.375v-1.5ZM10.875 18.75a.375.375 0 0 0 .375-.375v-1.5a.375.375 0 0 0-.375-.375h-7.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375h7.5ZM3.375 15h7.5a.375.375 0 0 0 .375-.375v-1.5a.375.375 0 0 0-.375-.375h-7.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375Zm0-3.75h7.5a.375.375 0 0 0 .375-.375v-1.5A.375.375 0 0 0 10.875 9h-7.5A.375.375 0 0 0 3 9.375v1.5c0 .207.168.375.375.375Z"
                        clip-rule="evenodd" />
                </svg>

                <p class="mb-4 text-3xl tracking-tight font-bold text-gray-900 md:text-4xl dark:text-white">Tidak
                    Ada Data</p>
                <p class="mb-4 text-lg font-light text-gray-500 dark:text-gray-400">Maaf, saat ini tidak ada data
                    yang tersedia.</p>
            </div>
        </section>
    </ng-container> -->
    <ng-container *ngIf="hasilSeleksi.peserta.length !== 0">
        <div
            class="grid mb-4 sm:grid-cols-1 divide-y divide-gray-100 border border-gray-300 rounded-lg md:mx-56 mx-4">
            <div class="grid gap-2 grid-cols-4">
                <div class="mt-2 flex flex-row justify-between">
                    <label class="text-start ml-2 md:ml-4 text-sm font-medium text-primary-bg">
                        Kuota Peserta
                    </label>
                    <label class="text-sm font-medium text-primary-bg">
                        :
                    </label>
                </div>
                <div class="text-start col-span-3 text-primary-bg text-sm rounded-lg block w-full p-2.5">
                    {{hasilSeleksi.ranking.kuota}}</div>
            </div>
            <div class="grid gap-2 grid-cols-4">
                <div class="mt-2 flex flex-row justify-between">
                    <label class="text-start ml-2 md:ml-4 text-sm font-medium text-primary-bg">
                        Jumlah Pendaftar
                    </label>
                    <label class="text-sm font-medium text-primary-bg">
                        :
                    </label>
                </div>
                <div class="text-start col-span-3 text-primary-bg text-sm rounded-lg block w-full p-2.5">
                    {{hasilSeleksi.ranking.num}}</div>
            </div>
            <div class="grid gap-2 grid-cols-4">
                <div class="mt-2 flex flex-row justify-between">
                    <label class="text-start ml-2 md:ml-4 text-sm font-medium text-primary-bg">
                        Waktu Update
                    </label>
                    <label class="text-sm font-medium text-primary-bg">
                        :
                    </label>
                </div>
                <div class="text-start col-span-3 text-primary-bg text-sm rounded-lg block w-full p-2.5">
                    {{hasilSeleksi.ranking.date}}</div>
            </div>
            <div class="grid gap-2 grid-cols-4">
                <div class="mt-2 flex flex-row justify-between">
                    <label class="text-start ml-2 md:ml-4 text-sm font-medium text-primary-bg">
                        Keterangan
                    </label>
                    <label class="text-sm font-medium text-primary-bg">
                        :
                    </label>
                </div>
                <div class="text-start col-span-3 text-primary-bg text-sm font-bold rounded-lg block w-full p-2.5">
                    {{hasilSeleksi.ranking.ket}}</div>
            </div>
            <ng-container *ngIf="hasilSeleksi.ranking.c_final === 1">
                <div class="grid gap-2 grid-cols-4">
                    <div class="mt-2 flex flex-row justify-between">
                        <label class="text-start ml-2 md:ml-4 text-sm font-medium text-primary-bg">
                            Surat Keputusan
                        </label>
                        <label class="text-sm font-medium text-primary-bg">
                            :
                        </label>
                    </div>
                    <a [href]="hasilSeleksi.surat.link" target="_blank" rel="noopener noreferrer"
                        class="text-start col-span-3 text-primary-bg font-medium text-sm  hover:font-bold hover:text-thirty-bg underline rounded-lg block w-full p-2.5">
                        {{hasilSeleksi.surat.title}}</a>
                </div>
            </ng-container>
        </div>
        <!-- class="relative overflow-x-auto border sm:rounded-lg w-auto max-h-96 mx-4 md:mx-18" -->
        <div class="relative overflow-x-auto lg:overscroll-x-none border sm:rounded-lg w-auto max-h-96 lg:max-h-none mx-4 md:mx-4">
            <table class="w-full text-sm text-left rtl:text-right">
                <thead class="sticky z-10 top-0  text-xs text-gray-700 uppercase bg-gray-50 border-b border-gray-200">
                    <tr>
                        <th scope="col" class="px-6 py-3">
                            ACC
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Urutan
                        </th>
                        <th scope="col" class="px-6 py-3">
                            NISN
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Nama Siswa
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Sekolah asal
                        </th>
                        <th scope="col" class="px-6 py-3">
                            {{hasilSeleksi.id_kategori == 1 || hasilSeleksi.id_kategori == 2 || hasilSeleksi.id_kategori == 4 || hasilSeleksi.id_kategori == 5 ? 'Nilai Jarak': 
                            hasilSeleksi.id_kategori == 3 ? 'Nilai Prestasi' : 'Nilai Rapor'}}
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Tanggal Lahir
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Tanggal Daftar
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Status
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Deskripsi
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <ng-container *ngFor="let peserta of hasilSeleksi.peserta; let i = index">
                        <tr class="border-b border-gray-200 hover:bg-gray-50">
                            <td class="relative px-4 py-2 bg-white  flex justify-center">
                                <button class="flex justify-between" type="button" (mouseenter)="showTooltip(i)"
                                    (mouseleave)="hideTooltip(i)">
                                    <ng-container *ngIf="peserta.valid === 0">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                                            class="w-6 h-6 text-orange-500">
                                            <path fill-rule="evenodd"
                                                d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"
                                                clip-rule="evenodd" />
                                        </svg>

                                    </ng-container>
                                    <ng-container *ngIf="peserta.valid === 1">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                                            class="w-6 h-6 text-green-700">
                                            <path fill-rule="evenodd"
                                                d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z"
                                                clip-rule="evenodd" />
                                        </svg>
                                    </ng-container>
                                    <ng-container *ngIf="peserta.valid === 2">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                                            class="w-6 h-6 text-red-700">
                                            <path fill-rule="evenodd"
                                                d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z"
                                                clip-rule="evenodd" />
                                        </svg>
                                    </ng-container>
                                </button>


                                <div *ngIf="tooltipVisible[i]"
                                    class="absolute z-20 left-16 top-0 inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm tooltip text-nowrap">
                                    {{peserta.valid === 0
                                    ? 'Belum dilakukan finalisasi oleh kepala sekolah'
                                    :peserta.valid === 1
                                    ? 'Telah dilakukan finalisasi oleh kepala sekolah'
                                    : 'Ditolak oleh kepala sekolah'}}
                                    <div
                                        class="absolute w-3 h-3 bg-gray-900 rotate-45 transform -left-1.5 top-1/2 -translate-y-1/2">
                                    </div>
                                </div>
                            </td>
                            <th scope="row" class="px-4 py-2 font-medium text-gray-900 whitespace-nowrap bg-blue-50">
                                {{peserta.ordering}}
                            </th>
                            <td class="px-4 py-2 font-medium text-gray-900 whitespace-nowrap bg-white">
                                {{peserta.nisn}}
                            </td>
                            <td class="px-4 py-2 font-medium bg-blue-50">
                                <div class="flex flex-row justify-between gap-8">
                                    <span class="text-gray-900 whitespace-nowrap">
                                        {{peserta.n_siswa}}
                                    </span>
                                    <button type="button" (click)="openDetail(i)">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                                            class="w-6 h-6 text-gray-500">
                                            <path fill-rule="evenodd"
                                                d="M15.75 2.25H21a.75.75 0 0 1 .75.75v5.25a.75.75 0 0 1-1.5 0V4.81L8.03 17.03a.75.75 0 0 1-1.06-1.06L19.19 3.75h-3.44a.75.75 0 0 1 0-1.5Zm-10.5 4.5a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h10.5a1.5 1.5 0 0 0 1.5-1.5V10.5a.75.75 0 0 1 1.5 0v8.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V8.25a3 3 0 0 1 3-3h8.25a.75.75 0 0 1 0 1.5H5.25Z"
                                                clip-rule="evenodd" />
                                        </svg>
                                    </button>
                                </div>
                            </td>
                            <td class="px-4 py-2 font-medium text-gray-900 whitespace-nowrap bg-white">
                                {{peserta.sekolah_asal}}
                            </td>
                            <td class="px-4 py-2 font-medium text-gray-900 whitespace-nowrap bg-blue-50">
                                {{hasilSeleksi.id_kategori == 1 || hasilSeleksi.id_kategori == 2 || hasilSeleksi.id_kategori == 4 || hasilSeleksi.id_kategori == 5 ? 
                                    peserta.c_zonasi == 0 ? '(Luar Kota)': peserta.nilai_jarak+' Km': 
                                    hasilSeleksi.id_kategori == 3 ? peserta.nilai_prestasi : peserta.nilai_rapor}}
                            </td>
                            <td class="px-4 py-2 font-medium text-gray-900 whitespace-nowrap bg-white">
                                {{peserta.d_lahir}}
                            </td>
                            <td class="px-4 py-2 font-medium text-gray-900 whitespace-nowrap bg-blue-50">
                                {{peserta.created_at}}
                            </td>
                            <td class="px-4 py-2 font-medium text-gray-900 whitespace-nowrap bg-white">
                                <span
                                    [ngClass]="peserta.c_lulus === 1 ? 'font-medium text-green-700' : 'font-medium text-red-700'">
                                    {{peserta.c_lulus === 1 ? 'Diterima': 'Tidak Diterima'}}</span>

                            </td>
                            <td class="px-4 py-2 font-medium text-gray-900 whitespace-nowrap bg-blue-50">
                                {{peserta.c_ganti === 1 ? 'Ganti Pilihan': '-'}}
                            </td>
                            
                        </tr>
                    </ng-container>
                </tbody>
            </table>

        </div>
    </ng-container>
</div>

<ng-container *ngIf="viewDetailPeserta">
    <div class="fixed flex justify-center items-center inset-0 z-50 bg-gray-300 bg-opacity-65 w-full h-full">
        <ppdb-lihat-hasil-seleksi-detail-utama (view)="getDetail($event)"
            [peserta]="detailPeserta"></ppdb-lihat-hasil-seleksi-detail-utama>
    </div>
</ng-container>